<app-header>
</app-header>
<ion-content [fullscreen]="true">

  <ion-grid class="filter">
    <ion-row class="ion-justify-content-between" style="width: 100%">
      <ion-card class="select-filter ion-padding" mode="ios" sizeLg="6" style="width: 100%;">
        <div class="title">
          <ion-icon class="ion-margin-end" name="person-circle-outline" size="large"></ion-icon>
          <ion-label class="select-title">Select a Doctor</ion-label>
        </div>
        <ion-select
          (ionChange)="filterSelect($event)"
          class="always-flip ion-justify-content-end"
          color="#000000"
          id="trigger-button"
          interface="popover"
          label=""
          placeholder="Any" toggleIcon="caret-down-sharp"
        >
          <ion-select-option [value]="null"> Any</ion-select-option>
          <ion-select-option *ngFor="let doctor of doctors; let i = index"
                             [value]="doctor">
            {{doctor.firstName}} {{doctor.lastName}}
          </ion-select-option>
        </ion-select>

      </ion-card>
      <ion-card class="select-filter ion-padding" mode="ios" sizeLg="6" style="width: 100%;">
        <div class="title">
          <ion-icon class="ion-margin-end" name="cog-outline" size="large"></ion-icon>
          <ion-label class="select-title">Select a Service</ion-label>
        </div>
        <ion-select
          [(ngModel)]="selectedService"
          class="always-flip"
          color="#000000"
          interface="popover"
          label=""
          placeholder="Any"
          toggleIcon="caret-down-sharp"
        >
          <ion-select-option [value]="null"> Any</ion-select-option>

          <ion-select-option *ngFor="let type of appointmentTypes; let i = index"
                             [value]="type">
            {{type}}
          </ion-select-option>
        </ion-select>
      </ion-card>
    </ion-row>
  </ion-grid>
  <div class="container">
    <ion-card class="card-calender" mode="ios">
      <ion-card-title class="ion-text-center ion-margin-bottom ion-margin-vertical" mode="ios"> Book an Appointment
      </ion-card-title>

      <ion-row class="ion-justify-content-center">
        <!-- Move back one screen of the slides -->
        <ion-col class="ion-text-start" sizeLg="2" sizeSm="">
          <ion-button (click)="back()" fill="clear">
            <ion-icon name="arrow-back" slot="icon-only"></ion-icon>
          </ion-button>
        </ion-col>

        <ion-col class="ion-text-center" sizeLg="8" sizeSm="8">
          <h2 class="calender-title">{{ viewTitle }}</h2>
        </ion-col>

        <!-- Move forward one screen of the slides -->
        <ion-col class="ion-text-end" sizeLg="2" sizeSm="1">
          <ion-button (click)="next()" fill="clear">
            <ion-icon name="arrow-forward" slot="icon-only"></ion-icon>
          </ion-button>
        </ion-col>
      </ion-row>


      <calendar (onCurrentDateChanged)="onDateSelected($event)"
                (onTitleChanged)="onViewTitleChanged($event)"
                [calendarMode]="calendar.mode"
                [currentDate]="calendar.currentDate"
                [endHour]="17"
                [eventSource]="eventSource"
                [markDisabled]="markDisabled"
                [monthviewDisplayEventTemplate]="monthviewDisplayEventTemplate"
                [showEventDetail]="false"
                [showEventDetail]="false"
                [startHour]="9">
      </calendar>

      <ng-template #monthviewDisplayEventTemplate let-col="col" let-row="row" let-view="view">
        <ion-label class="calendar-box">{{view.dates[row * 7 + col].label}}</ion-label>
        <div class="indicator-container">
          <div *ngFor="let e of view.dates[row*7+col].events" class="event-indicator">
          </div>
        </div>
      </ng-template>

      <div *ngIf="!subscriptionComplete" class="loading-spinner"
           style="width: 100%; display: flex; justify-content: center">
        <ion-spinner color="primary" name="bubbles"></ion-spinner>
      </div>
      <ion-row *ngIf="subscriptionComplete" class="ion-margin-vertical" style="width: 100%; display: block">
        <div *ngIf="appointmentAvailable">
          <ion-col *ngFor="let time of appointmentTimeShifts " class="ion-text-center" sizeLg="2" sizeSm="1">
            <ion-button (click)="timeOnClick(time)" [disabled]="!isAvailable(time)" class="buttons" color="primary"
                        fill="outline"
                        mode="ios" shape="round" size="small">
              {{time}}
            </ion-button>
          </ion-col>
        </div>
        <ion-text *ngIf="!appointmentAvailable" class="ion-padding ion-margin ">No Appointments</ion-text>


      </ion-row>

    </ion-card>


  </div>
</ion-content>
<app-footer></app-footer>


